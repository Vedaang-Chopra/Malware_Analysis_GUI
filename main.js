const electron= require('electron');
const url =require('url');
const path=require('path');

const { app,BrowserWindow,ipcMain}=electron;         // Destructuring the electron object by referencing the different keys with name
const ipc=electron.ipcMain

let mainWindow;
// When the application is ready
app.on('ready', function() {

    // Step1:- Create a main window
    mainWindow = new BrowserWindow({width: 1500, height: 1000, frame: true, resizable: false})

    // Step2:- Load HTML in the main window

    mainWindow.loadURL(url.format({
        pathname: path.join(__dirname, 'Front-end', 'Final', 'login.html'),
        protocol: 'file',
        slashes: true
    }));    // THIS IS USED TO PASS THE FILE INTO THE LOAD THE FILE IN MAIN WINDOW, JUST BY USING PATH,URL MODULES

// Step 3:- Build Menu from Template
//     const mainMenu= Menu.buildFromTemplate(mainMenuTemplate)
    // insert Menu
    // Menu.setApplicationMenu(mainMenu);
// Step 4:- Closing all Windows when the main window is crossed
    mainWindow.on('closed', () => {
        app.quit();
    });
    // mainWindow.setMenu(null);
// Step 5:- Catching with IPC main:
    ipc.on('validation:check', function (e) {
            mainWindow.loadURL(url.format({
                pathname: path.join(__dirname, 'Front-end', 'Final', 'commingsoon.html'),
                protocol: 'file',
                slashes: true
            }));

    });
});


// Create a menu template
// const mainMenuTemplate=[
//     {
//         label:"file",
//         submenu:[
//             {
//                 label:"Add Item",
//                 click(){
//                     createAddWindow();
//                 }
//             },
//             {
//                 label:"Clear Items"
//             },
//             {
//                 label:"Quit",
//                 accelerator:process.platform=='darwin'? 'Command+Q': 'Ctrl+Q',
//                 click(){
//                     app.quit();
//                 }
//             }
//         ]
//
//     }
// ];
// exports.openWindow=(filename)=>{
//     mainWindow = new BrowserWindow({width: 1500, height: 1000, frame: true, resizable: false})
//     mainWindow.loadURL(url.format({
//         pathname: path.join(__dirname, 'Front-end', 'Final', `${filename}`+'.html'),
//         protocol: 'file',
//         slashes: true
//     }));
// }